<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>15 Anos ‚Äì Lia Isabelli</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* helper para esconder via atributo */
    [hidden]{ display:none !important; }

    /* ===== PASSWORD GATE ===== */
    .gate{
      position:fixed; inset:0; z-index:99999;
      display:grid; place-items:center;
      background: radial-gradient(1200px 600px at 50% -10%, rgba(255,255,255,.18), rgba(107,132,196,.65) 60%, rgba(47,64,118,.85));
      backdrop-filter: blur(6px) saturate(140%);
      -webkit-backdrop-filter: blur(6px) saturate(140%);
    }
    .gate__card{
      width:min(520px, 92vw);
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.35);
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(10,16,28,.35), inset 0 1px 6px rgba(255,255,255,.2);
      padding: clamp(18px, 3.2vw, 28px);
      color:#fff;
      text-align:center;
    }
    .gate__title{ margin:0 0 6px; font: 800 clamp(18px, 3.8vw, 26px)/1.2 "Inter",system-ui,sans-serif; letter-spacing:.02em; }
    .gate__sub{ margin:0 0 16px; opacity:.9; font-size: clamp(13px,2.8vw,15px); }
    .gate__row{ display:grid; grid-template-columns: 1fr auto; gap:10px; margin-top:12px; }
    .gate__input{
      height:48px; border-radius:14px; outline:none;
      border:1px solid rgba(255,255,255,.35);
      background: rgba(255,255,255,.12);
      color:#fff; padding:0 14px; font-size:16px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,.12);
    }
    .gate__btn{
      height:48px; padding:0 16px; border-radius:14px;
      border:1px solid rgba(255,255,255,.45);
      background: linear-gradient(180deg, rgba(255,255,255,.34), rgba(255,255,255,.12));
      color:#0b1230; font-weight:800; letter-spacing:.04em; cursor:pointer;
      box-shadow: 0 6px 16px rgba(10,16,28,.28), inset 0 1px 4px rgba(255,255,255,.25);
    }
    .gate__btn:hover{ filter: brightness(1.05); transform: translateY(-1px); }
    .gate__err{ margin-top:10px; min-height:18px; color:#ffd7d7; font-weight:700; letter-spacing:.04em; }

    :root{
      --serenity:#6b84c4;
      --silver:linear-gradient(90deg,#e3e6eb,#f7f7f7,#d0d3d8);
      --glass-bg: rgba(255,255,255,.10);
      --glass-brd: rgba(255,255,255,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      background:var(--serenity);
      overflow-x:hidden; min-height:100vh;
      display:flex; flex-direction:column; align-items:center;
      position:relative; font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }

    /* background stars (opcional) */
    .sparkles{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:1}
    .sparkles i{position:absolute; width:3px; height:3px; border-radius:50%; filter:drop-shadow(0 0 6px rgba(255,255,255,.9)); opacity:.85; animation:float 12s linear infinite, twinkle 2.6s ease-in-out infinite}
    @keyframes twinkle{0%,100%{opacity:.3}50%{opacity:.95}}
    @keyframes float{0%{transform:translateY(110vh)}100%{transform:translateY(-10vh)}}

    /* container do convite (exibir ap√≥s senha) */
    #invite{opacity:0; transform:translateY(40px); transition:opacity 900ms ease, transform 900ms ease; position:relative; z-index:2; width:100%; display:flex; justify-content:center; margin-top:24px}
    #invite.show{opacity:1; transform:translateY(0)}
    .invite__wrap{display:grid; gap:24px; place-items:center; padding:24px 16px 56px}
    .invite__card{ max-width:600px; width:92vw; margin:20px auto; }
    .invite__card img{display:block; width:100%; height:auto; border-radius:16px}

    /* countdown clean (se usar) */
    .countdown-wrap{ margin: 6px 0 22px; display:flex; justify-content:center; }
    .countdown{
      display:flex; align-items:flex-end; gap: clamp(16px, 4vw, 36px);
      padding: clamp(10px, 2vw, 14px) clamp(16px, 4vw, 28px);
      background: transparent; border: 1px solid rgba(255,255,255,.22); border-radius: 10px; box-shadow:none;
      color:#fff;
    }
    .cd-item{ text-align:center; min-width: clamp(64px, 14vw, 96px); }
    .cd-item div{ font-size: clamp(28px, 6vw, 40px); font-weight: 800; line-height: 1; }
    .cd-item small{ display:block; margin-top:6px; font-size: clamp(10px, 2.6vw, 12px); letter-spacing:.08em; opacity:.85; }
    .countdown span{ align-self:center; opacity:.5; font-weight:700; font-size: clamp(18px, 5vw, 26px); }
  </style>
</head>
    <body>
  <!-- PASSWORD GATE -->
  <section id="gate" class="gate" aria-label="Protegido por senha">
    <div class="gate__card" role="dialog" aria-modal="true" aria-labelledby="gateTitle">
      <h1 id="gateTitle" class="gate__title">Digite a senha para abrir o convite</h1>
      <p class="gate__sub">Dica: √© o c√≥digo combinado com a fam√≠lia üòâ</p>
      <form id="gateForm" class="gate__form" autocomplete="off">
        <div class="gate__row">
          <input id="gateInput" class="gate__input" type="password" inputmode="text" placeholder="Senha" aria-label="Senha" />
          <button class="gate__btn" type="submit">Entrar</button>
        </div>
        <div id="gateErr" class="gate__err" aria-live="polite"></div>
      </form>
    </div>
  </section>

    <div class="sparkles" aria-hidden="true"></div>
    <div class="touch-layer" aria-hidden="true"></div>

    <!-- ENVELOPE OVERLAY -->
    <section id="envelope" class="env" aria-label="Abrir convite">
      <div class="env__stage">
        <div class="env__envelope">
          <div class="env__back"></div>
          <div class="env__front"></div>
          <div class="env__flap"></div>
          <button id="envSeal" class="env__seal" aria-label="Abrir envelope">
            <img src="assets/imagens/icone-selo.png" alt="Selo" />
          </button>
        </div>
      </div>
    </section>

    <main id="invite" class="screen">
      <div class="invite__wrap">
        <div class="invite__card">
          <img src="assets/imagens/convite.png" alt="Convite 15 anos" />
        </div>

        <!-- COUNTDOWN -->
        <div class="countdown-wrap">
          <div class="countdown" aria-live="polite">
            <div class="cd-item">
              <div id="cd-days">--</div>
              <small>DIAS</small>
            </div>
            <span aria-hidden="true">:</span>
            <div class="cd-item">
              <div id="cd-hours">--</div>
              <small>HORAS</small>
            </div>
            <span aria-hidden="true">:</span>
            <div class="cd-item">
              <div id="cd-mins">--</div>
              <small>MIN</small>
            </div>
            <span aria-hidden="true">:</span>
            <div class="cd-item">
              <div id="cd-secs">--</div>
              <small>SEG</small>
            </div>
          </div>
        </div>

        <div class="actions">
          <a class="action" href="#" id="giftsBtn" title="Sugest√£o de presente" aria-label="Sugest√£o de presente">
            <img src="assets/imagens/icone-presente.png" alt="√çcone presente" />
          </a>
          <a class="action" href="#" id="rsvpBtn" title="Confirmar presen√ßa" aria-label="Confirmar presen√ßa">
            <img src="assets/imagens/icone-confirmar.png" alt="√çcone confirmar presen√ßa" />
          </a>
        </div>
      </div>
    </main>

    <!-- GIFTS MODAL -->
    <section id="giftsModal" class="modal" aria-hidden="true" aria-labelledby="giftsTitle" role="dialog">
      <div class="modal__backdrop" data-close></div>
      <div class="modal__card" role="document">
        <button class="close-x" title="Fechar" aria-label="Fechar" data-close>&times;</button>
        <h3 id="giftsTitle" class="modal__title">Sugest√µes de Presentes</h3>
        <div class="gifts">
          <div class="gift-card"><h3>Perfumes & Hidratantes</h3><p>Florata Red, Red Blossom, Ameixa Negra, Cereja Rouge</p></div>
          <div class="gift-card"><h3>Livros</h3><p>Romance</p></div>
          <div class="gift-card"><h3>Sapatos</h3><p>Tamanho 36/37</p></div>
          <div class="gift-card"><h3>Roupas</h3><p>Tamanho P / 34-36</p></div>
          <div class="gift-card"><h3>Maquiagem</h3><p>Itens variados</p></div>
          <div class="gift-card"><h3>Acess√≥rios</h3><p>Joias prateadas ou douradas, bolsas</p></div>
          <div class="gift-card"><h3>Produtos de Beleza</h3><p>Cabelo, unhas e pele</p></div>
          <div class="gift-card obs"><h3>Caso prefira</h3><p>O Pix da Lia √©: 42991314670</p></div>
        </div>
      </div>
    </section>

    <!-- RSVP MODAL -->
    <section id="rsvpModal" class="modal" aria-hidden="true" aria-labelledby="rsvpTitle" role="dialog">
      <div class="modal__backdrop" data-close></div>
      <div class="modal__card" role="document">
        <button class="close-x" title="Fechar" aria-label="Fechar" data-close>&times;</button>
        <h3 id="rsvpTitle" class="modal__title">Confirmar presen√ßa</h3>
        <div class="modal__row">
          <div class="field">
            <label for="rsvpName">Seu nome</label>
            <input id="rsvpName" class="input" type="text" placeholder="Ex.: Marcela Queji" />
          </div>

          <div class="field">
            <div class="toggle-row">
              <input type="checkbox" id="toggleGuests" />
              <label for="toggleGuests">Vai confirmar mais algu√©m?</label>
            </div>
            <div id="guestList" class="guest-list" aria-live="polite">
              <button type="button" class="add-guest" id="addGuestBtn">+ Adicionar pessoa</button>
            </div>
          </div>

          <div class="field">
            <label for="rsvpMsg">Mensagem (opcional)</label>
            <textarea id="rsvpMsg" placeholder="Escreva uma mensagem carinhosa"></textarea>
          </div>
          <div class="hint">Ao enviar, abriremos seu WhatsApp com a mensagem preenchida. Voc√™ poder√° editar antes de enviar.</div>
        </div>
        <div class="modal__actions">
          <button class="btn btn--ghost" data-close>Cancelar</button>
          <button id="sendRsvp" class="btn btn--primary">Enviar pelo WhatsApp</button>
        </div>
      </div>
    </section>

    <!-- trilha de fundo -->
    <audio id="bgMusic" src="music/Turning page.mp3" preload="auto"></audio>

    <script>
    (function () {
      // ===== estrelas de fundo =====
      const sparklesEl = document.querySelector('.sparkles');

      for (let i = 0; i < 150; i++) {
        const s = document.createElement('i');
        s.style.left = Math.random() * 100 + 'vw';
        s.style.animationDelay = (Math.random() * 12) + 's';
        s.style.opacity = (.3 + Math.random() * .7).toFixed(2);
        s.style.background = Math.random() > 0.5
          ? 'radial-gradient(circle,#9fc3ff,#5c7ed6)'
          : 'radial-gradient(circle,#fff,#d9d9ff)';
        sparklesEl.appendChild(s);
      }
      for (let i = 0; i < 60; i++) {
        const s = document.createElement('i');
        s.className = 'b';
        s.style.left = Math.random() * 100 + 'vw';
        s.style.animationDelay = (Math.random() * 10) + 's';
        s.style.opacity = (.25 + Math.random() * .75).toFixed(2);
        s.style.width = s.style.height = (2 + Math.random() * 3) + 'px';
        sparklesEl.appendChild(s);
      }

      // ===== intera√ß√£o: brilhos seguem o dedo/mouse =====
      let targetTX = 0, targetTY = 0, curTX = 0, curTY = 0, baseMag = 18;
      function updateTargetFromPointer(x, y) {
        const nx = (x / window.innerWidth)  * 2 - 1;
        const ny = (y / window.innerHeight) * 2 - 1;
        targetTX = -nx * baseMag; targetTY = -ny * baseMag;
      }
      (function animateSparklesFollow() {
        curTX += (targetTX - curTX) * 0.12;
        curTY += (targetTY - curTY) * 0.12;
        sparklesEl.style.transform = `translate3d(${curTX.toFixed(2)}px, ${curTY.toFixed(2)}px, 0)`;
        requestAnimationFrame(animateSparklesFollow);
      })();
      window.addEventListener('pointermove', (e)=>updateTargetFromPointer(e.clientX, e.clientY), {passive:true});
      window.addEventListener('pointerdown', (e)=>{ baseMag = 32; updateTargetFromPointer(e.clientX, e.clientY); }, {passive:true});
      window.addEventListener('pointerup',   ()=>{ baseMag = 18; }, {passive:true});
      window.addEventListener('pointerleave',()=>{ targetTX = 0; targetTY = 0; }, {passive:true});
      window.addEventListener('resize',      ()=>{ targetTX = 0; targetTY = 0; });

      // ===== revelar card =====
      const invite = document.getElementById('invite');
      setTimeout(() => { invite.classList.add('show'); }, 2800);

      // ===== helpers modal open/close =====
      function bindModal(trigger, modal){
        const openBtn = document.getElementById(trigger);
        const m = document.getElementById(modal);
        const closeEls = m.querySelectorAll('[data-close]');
        const open = (e)=>{ if(e){e.preventDefault();} m.classList.add('show'); m.setAttribute('aria-hidden','false'); };
        const close= ()=>{ m.classList.remove('show'); m.setAttribute('aria-hidden','true'); };
        openBtn && openBtn.addEventListener('click', open);
        closeEls.forEach(el=> el.addEventListener('click', close));
        m.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });
      }
      bindModal('giftsBtn','giftsModal');

      // ===== RSVP modal logic =====
      const WHATSAPP_NUMBER = '5542999140576';
      bindModal('rsvpBtn','rsvpModal');

      const guestList = document.getElementById('guestList');
      const toggleGuests = document.getElementById('toggleGuests');
      const addGuestBtn = document.getElementById('addGuestBtn');

      toggleGuests.addEventListener('change', ()=>{
        guestList.classList.toggle('show', toggleGuests.checked);
        if(toggleGuests.checked && guestList.querySelectorAll('.guest-row').length===0){
          addGuestRow();
        }
      });

      function addGuestRow(name=''){
        const row = document.createElement('div');
        row.className = 'guest-row';
        row.innerHTML = `
          <input class="input guest-name" type="text" placeholder="Nome do convidado" value="${name}" />
          <select class="input guest-type">
            <option value="Adulto">Adulto</option>
            <option value="Crian√ßa">Crian√ßa</option>
          </select>
          <button type="button" class="remove" title="Remover" aria-label="Remover">√ó</button>
        `;
        row.querySelector('.remove').addEventListener('click', ()=> row.remove());
        guestList.insertBefore(row, addGuestBtn);
      }
      addGuestBtn.addEventListener('click', ()=> addGuestRow());

      document.getElementById('sendRsvp').addEventListener('click', ()=>{
        const name   = document.getElementById('rsvpName').value.trim();
        const note   = document.getElementById('rsvpMsg').value.trim();
        if(!name){ alert('Por favor, informe seu nome.'); return; }

        const rows = [...guestList.querySelectorAll('.guest-row')];
        const extra = rows.map(r=>{
          const n = r.querySelector('.guest-name').value.trim();
          const t = r.querySelector('.guest-type').value;
          return n? `${n} (${t})` : '';
        }).filter(Boolean);

        const total = 1 + extra.length;

        let text = `Ol√°! Quero confirmar presen√ßa no anivers√°rio de 15 anos da Lia Isabelli.\n`+
                  `Nome: ${name}\nTotal de pessoas: ${total}`;
        if(extra.length){
          text += `\nAcompanhantes:`;
          extra.forEach((e)=>{ text += `\n - ${e}`; });
        }
        if(note) text += `\nMensagem: ${note}`;

        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`;
        window.open(url, '_blank');
        document.getElementById('rsvpModal').classList.remove('show');
      });

      // ===== Fairy FX (full-screen transition) =====
      function playFairyFx() {
        const fxLayer = document.createElement('div');
        fxLayer.className = 'fx-layer';
        document.body.appendChild(fxLayer);

        const N = Math.floor(18 + Math.random()*8);
        const rect = fxLayer.getBoundingClientRect();
        const cx = rect.width/2, cy = rect.height*0.42;
        const maxR = Math.hypot(rect.width, rect.height) * 0.55;

        for(let i=0;i<N;i++){
          const isCrystal = Math.random() < 0.18;
          const s = document.createElement('i');
          s.className = 'fx-spark' + (isCrystal ? ' crystal' : '');
          const startX = cx + (Math.random()*80 - 40);
          const startY = cy + (Math.random()*60 - 30);
          s.style.left = startX+'px';
          s.style.top  = startY+'px';
          const radius = 0.45*maxR + Math.random()*0.55*maxR;
          const angle  = Math.random()*Math.PI*2;
          const dx = Math.cos(angle)*radius;
          const dy = Math.sin(angle)*radius;
          s.style.setProperty('--dx', dx+'px');
          s.style.setProperty('--dy', dy+'px');
          s.style.animationDelay = (0.28 + Math.random()*0.60)+'s';
          fxLayer.appendChild(s);
        }
        setTimeout(()=> fxLayer.remove(), 2400);
      }
      window.playFairyFx = playFairyFx;

      // ===== ENVELOPE logic =====
      const env = document.getElementById('envelope');
      const envSeal = document.getElementById('envSeal');
      const card = document.querySelector('.invite__card');

      if (env && envSeal) {
        envSeal.addEventListener('click', () => {
          setTimeout(playFairyFx, 120);
          env.classList.add('is-opening');
          card && card.classList.add('raise');
          setTimeout(() => { env.setAttribute('hidden',''); }, 950);
        });
      }

      // ===== COUNTDOWN =====
      const alvo = new Date(2025, 11, 20, 0, 0, 0); // 20/12/2025
      const elDays  = document.getElementById('cd-days');
      const elHours = document.getElementById('cd-hours');
      const elMins  = document.getElementById('cd-mins');
      const elSecs  = document.getElementById('cd-secs');
      const cont    = document.querySelector('.countdown');
      const z = (n) => String(n).padStart(2, '0');

      function tick() {
        const agora = new Date();
        let diff = alvo - agora;
        if (diff <= 0) {
          cont.innerHTML = '<strong style="font-size:24px">Hoje √© o grande dia! ‚ú®</strong>';
          clearInterval(tmr); return;
        }
        const s = Math.floor(diff / 1000);
        const d = Math.floor(s / 86400);
        const h = Math.floor((s % 86400) / 3600);
        const m = Math.floor((s % 3600) / 60);
        const sec = s % 60;
        elDays.textContent  = d;
        elHours.textContent = z(h);
        elMins.textContent  = z(m);
        elSecs.textContent  = z(sec);
      }
      tick();
      const tmr = setInterval(tick, 1000);
    })();

    /* ===== toque m√°gico (estrelinhas + rastro) ===== */
    (function(){
      const layer = document.querySelector('.touch-layer');
      if (!layer) return;

      function spawnSpark(x, y, opts = {}) {
        const el = document.createElement('i');
        el.className = 'spark'
          + (Math.random() > 0.5 ? ' blue' : '')
          + (opts.trail ? ' trail' : '')
          + (opts.dust ? ' dust' : '');
        el.style.left = x + 'px';
        el.style.top  = y + 'px';

        if (opts.dust) {
          const ang = Math.random() * Math.PI * 2;
          const rad = 6 + Math.random() * 10;
          el.style.setProperty('--dx', Math.cos(ang) * rad + 'px');
          el.style.setProperty('--dy', Math.sin(ang) * rad + 'px');
        }
        layer.appendChild(el);
        setTimeout(() => el.remove(), opts.trail ? 720 : 980);
      }

      function burst(x, y) {
        for (let i = 0; i < 10; i++) spawnSpark(x, y, { dust: true });
        for (let i = 0; i < 4; i++)  spawnSpark(x + (Math.random()-0.5)*24, y + (Math.random()-0.5)*24);
      }

      let lastTrail = 0;
      function onMove(e) {
        const p = e.touches ? e.touches[0] : e;
        const now = performance.now();
        if (now - lastTrail < 22) return;
        lastTrail = now;
        spawnSpark(p.clientX, p.clientY, { trail: true });
      }
      function onStart(e) {
        const p = e.touches ? e.touches[0] : e;
        burst(p.clientX, p.clientY);
      }

      window.addEventListener('pointerdown', onStart, { passive:true });
      window.addEventListener('pointermove', onMove,  { passive:true });
      window.addEventListener('touchstart', onStart,  { passive:true });
      window.addEventListener('touchmove', onMove,    { passive:true });
    })();
    </script>

    <!-- trilha de fundo -->
    <audio id="bgMusic" src="music/Turning page.mp3" preload="auto"></audio>
    <script>
      // tocar m√∫sica ao abrir o envelope
      const bgMusic = document.getElementById('bgMusic');
      function playMusic(){
        if(!bgMusic) return;
        bgMusic.volume = 0.7;
        bgMusic.loop = true;
        bgMusic.play().catch(() => {
          const retry = () => { bgMusic.play().finally(() => document.removeEventListener('click', retry)); };
          document.addEventListener('click', retry, { once:true });
        });
      }
      const selo = document.querySelector('.env__seal');
      if (selo){ selo.addEventListener('click', playMusic, { once:true }); }
      else { document.addEventListener('click', playMusic, { once:true }); }
    </script>
      <script>
    // Gate de senha
    (function(){
      const gateForm = document.getElementById("gateForm");
      const gateInput = document.getElementById("gateInput");
      const gateErr   = document.getElementById("gateErr");
      const gate      = document.getElementById("gate");

      const CORRECT_PASS = "XVLIA"; // senha padr√£o

      gateForm.addEventListener("submit", function(e){
        e.preventDefault();
        if(gateInput.value.trim().toUpperCase() === CORRECT_PASS){
          gate.setAttribute("hidden", "true");   // esconde gate
          document.body.classList.add("gate-ok"); // marca que passou
        } else {
          gateErr.textContent = "Senha incorreta. Tente novamente!";
          gateInput.value = "";
          gateInput.focus();
        }
      });
    })();
  </script>
  </body>
  </html>
